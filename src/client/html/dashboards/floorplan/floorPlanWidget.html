<template name="floorPlanWidget">
    <div class="ui card" style="width:100%;height:100%">

        {{> widgetHeader }}
        {{#with data}}
            <div class="content" style="background-image: url('{{icon}}');background-size:100% 100%">
                {{#if isEditMode}}
                <span style="float:right;color: rgba(0, 0, 0, 0.4);z-index:300000">
                    <div class="ui mini vertical icon basic buttons" style="background-color: rgba(255,255,255,0.6)">
                        <button title="Add Widget to the floor plan" class="ui button addFPWidget" ><i class="plus icon"></i></button>
                      <!--  <button title="Edit Widget" class="ui button editFPWidget" ><i class="edit icon"></i></button>-->
                        <button title="Remove Widget" class="ui button removeFPWidget" ><i class="remove icon"></i></button>
                    </div>
                </span>
                {{/if}}
                {{#each widget.widgets}}
                    <div style="left:{{transformX ../.. geometry.x}}px;top:{{transformY ../.. geometry.y}}px;height:{{transformHeight ../.. geometry.height}}px;width:{{transformWidth ../.. geometry.width}}px;{{#if isSelected id}}border:3px solid;border-color:rgba(0,0,0,0.1);background-color:rgba(0,0,0,0.1);{{/if}}"
                         class="fpWidget draggable" id="{{id}}" floorPlan="{{../widget.id}}">

                        {{> floorPlanWidgetWrapper widget=this floorPlan=../widget}}

                        {{#if isEditMode}}
                            {{> floorPlanWidgetControls widget=this floorPlan=../widget}}
                        {{/if}}
                    </div>
                {{/each}}

            </div>

        {{/with}}
    </div>
</template>